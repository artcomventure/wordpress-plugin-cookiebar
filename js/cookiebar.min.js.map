{"version":3,"sources":["cookiebar.js"],"names":["document","addEventListener","forEach","call","getElementsByClassName","$cookiebar","id","body","classList","add","position","getAttribute","gap","window","requestAnimationFrame","offsetHeight","parseInt","style","e","stopPropagation","querySelectorAll","$action","tagName","removeAttribute","preventDefault","setCookie","contains","getElementById","parentNode","removeChild","accept","Sid","accepted","declined","status","cookie","value","split","trim","indexOf","decodeURIComponent","replace","RegExp","JSON","parse","locale","hash","encodeURIComponent","stringify","settings","expires","Date","setTime","getTime","push","toGMTString","join","remove","dispatchEvent","Event","bubbles","indirect","Array","prototype","$link"],"mappings":"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","sourcesContent":["document.addEventListener( 'DOMContentLoaded', function() {\n\n    [].forEach.call( document.getElementsByClassName( 'cookiebar' ), function( $cookiebar ) {\n        // is main cookiebar\n        if ( $cookiebar.id === 'cookiebar' ) {\n            document.body.classList.add( 'cookie-bar' );\n\n            const position = $cookiebar.getAttribute( 'data-position' );\n\n            // set gap on ´position´ of page\n            (function gap() {\n                if ( !$cookiebar || position === 'middle' ) return;\n                window.requestAnimationFrame( gap );\n                if ( $cookiebar.offsetHeight === parseInt( document.body.style['padding-' + position] ) ) return;\n                document.body.style['padding-' + position] = $cookiebar.offsetHeight + 'px';\n            })();\n\n            $cookiebar.addEventListener( 'click', function( e ) {\n                e.stopPropagation();\n            }, false );\n        }\n    } );\n\n    // accept cookie\n    [].forEach.call( document.querySelectorAll( '.accept-essential-cookies, .accept-all-cookies' ), function( $action ) {\n        if ( $action.tagName === 'BUTTON' ) $action.removeAttribute( 'onclick' );\n\n        $action.addEventListener( 'click', function( e ) {\n            e.preventDefault();\n\n            setCookie( this.classList.contains( 'accept-all-cookies' ) );\n\n            // remove cookiebar\n            let $cookiebar = document.getElementById( 'cookiebar' );\n            if ( $cookiebar ) {\n                if ( $cookiebar.getAttribute( 'data-position' ) !== 'middle' ) document.body.style['padding-' + position] = '';\n                $cookiebar.parentNode.removeChild( $cookiebar );\n            }\n        }, false );\n    } );\n\n    // set cookie on accept action\n    function setCookie( accept ) {\n        Sid.accepted = accept ? 1 : 0;\n        Sid.declined = accept ? 0 : 1;\n        Sid.status = accept ? 1 : 2;\n\n        let cookie = (function() {\n            let value = '';\n            document.cookie.split( ';' ).forEach( function ( cookie ) {\n                if ( !value && cookie.trim().indexOf( 'sid=' ) == 0 ) {\n                    value = decodeURIComponent( cookie.replace( new RegExp( '^\\\\s*sid=' ), '' ) );\n                }\n            } );\n\n            return JSON.parse( value||\"{}\" );\n        })();\n\n        cookie[Sid.locale] = Sid.accepted + Sid.hash;\n        cookie = ['sid=' + encodeURIComponent( JSON.stringify( cookie ) ), 'path=/'];\n        if ( Sid.settings.expires ) {\n            let expires = new Date();\n            expires.setTime( expires.getTime() + Sid.settings.expires * 1000);\n            cookie.push( 'expires=' + expires.toGMTString() )\n        }\n        document.cookie = cookie.join( ';' );\n\n        document.body.classList.remove( 'cookie-bar' );\n\n        // let 'others' know _cookies_ are accepted/declined\n        document.body.dispatchEvent( new Event( (Sid.accepted === 1 ? 'sid-accepted' : 'sid-declined'), { bubbles: true } ) );\n        // backwards compatibility prior 1.3.0\n        if ( Sid.accepted ) document.body.dispatchEvent( new Event( 'sid_accepted' , { bubbles: true } ) );\n    }\n\n    // set cookie on EVERY link click\n    if ( parseInt( Sid.settings.indirect ) ) Array.prototype.forEach.call( document.querySelectorAll( 'a, form button, form input[type=\"submit\"]' ), function( $link ) {\n        $link.addEventListener( 'click', function() {\n            setCookie( true )\n        }, false);\n    });\n\n}, false );\n"],"file":"cookiebar.min.js"}